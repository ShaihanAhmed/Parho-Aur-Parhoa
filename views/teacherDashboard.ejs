<!-- ----------------------------- fall back point 2------------------------ -->
<!-- main shit real code  -->
<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Teacher Dashboard Test</title>
  </head>
  <body>
    <h1>Teacher: <%= user.name %> â€” Test Course Upload</h1>

    <% if (message) { %>
    <p style="color: green"><%= message %></p>
    <% } %>

    <form
      action="/teacher/course/create-with-resources"
      method="POST"
      enctype="multipart/form-data"
    >
      <label>Course Name:</label>
      <input type="text" name="name" placeholder="Enter course name" required />
      <br /><br />

      <label>Upload Materials (PDF, Image, Video, Docs):</label>
      <input type="file" name="files" multiple required />
      <br /><br />

      <button type="submit">Create Course + Upload Files</button>
    </form>

    <hr />

    <% if (courses && courses.length > 0) { %>
    <h2>Your Courses & Resources</h2>
    <% courses.forEach(course => { %>
    <div style="border: 1px solid #ccc; margin: 10px; padding: 10px">
      <h3><%= course.name %></h3>

      <% if (course.resources && course.resources.length > 0) { %>
      <ul>
        <% course.resources.forEach(r => { %>
        <li>
          <a href="<%= r.fileUrl %>" target="_blank"><%= r.title %></a>
          (<%= r.fileType %>)
        </li>
        <% }); %>
      </ul>
      <% } else { %>
      <p>No resources uploaded yet.</p>
      <% } %>
    </div>
    <% }); %> <% } %>
  </body>
</html> -->

<!-- -------------------- final test ver ejs with everything announce -------------------------- -->
<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Teacher Dashboard</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f7fb;
        margin: 0;
        padding: 20px;
        color: #333;
      }

      h1 {
        background: #4a6cf7;
        color: white;
        padding: 15px;
        border-radius: 8px;
      }

      form {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      label {
        font-weight: bold;
      }

      input[type="text"],
      textarea,
      input[type="file"] {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        margin-bottom: 15px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }

      fieldset {
        border: 1px solid #d0d0d0;
        padding: 15px;
        border-radius: 8px;
        background: #fafafa;
      }

      legend {
        font-weight: bold;
        padding: 0 8px;
      }

      button {
        padding: 12px 20px;
        background: #4a6cf7;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
      }

      button:hover {
        background: #3d57d4;
      }

      .course-box {
        background: white;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
      }

      .course-box h3 {
        margin-top: 0;
        color: #4a6cf7;
      }

      .quiz-block {
        background: #eef1ff;
        padding: 15px;
        border-radius: 8px;
        margin-top: 10px;
      }

      .answer {
        background: #d4ffd4;
        display: inline-block;
        padding: 3px 8px;
        border-radius: 5px;
      }

      .announcement-box {
        background: #fff8d1;
        padding: 10px;
        border-left: 5px solid #e0c200;
        border-radius: 5px;
        margin-bottom: 10px;
      }

      .no-course-msg {
        color: #777;
        font-style: italic;
      }
    </style>
  </head>

  <body>
    <h1>Teacher: <%= user?.name || "Teacher" %> â€” Dashboard</h1>

    <% if (message) { %>
      <p style="color: green"><%= message %></p>
    <% } %>

    <form
      action="/teacher/course/create-with-resources"
      method="POST"
      enctype="multipart/form-data"
    >
      <label>Course Name:</label>
      <input type="text" name="name" required placeholder="Enter course name" />

      <label>Announcement (Optional):</label>
      <textarea name="announcementMessage" placeholder="Write an announcement..."></textarea>

      <label>Upload Materials:</label>
      <input type="file" name="files" multiple />

      <h3>Add Quiz (5 Questions)</h3>

      <label>Quiz Title:</label>
      <input type="text" name="quizTitle" placeholder="Enter quiz title" />

      <label>Quiz Topic:</label>
      <input type="text" name="quizTopic" placeholder="Enter optional topic" />

      <% for (let i = 1; i <= 5; i++) { %>
        <fieldset>
          <legend>Question <%= i %></legend>

          <input type="text" name="q<%= i %>" placeholder="Question <%= i %>" />

          <% for (let j = 1; j <= 4; j++) { %>
            <input
              type="text"
              name="q<%= i %>_options[]"
              placeholder="Option <%= j %>"
            />
          <% } %>

          <input type="text" name="q<%= i %>_answer" placeholder="Correct answer" />
        </fieldset>
      <% } %>

      <button type="submit">Create Course + Upload Files + Add Quiz</button>
    </form>

    <hr />

    <% if (courses?.length > 0) { %>
      <h2>Your Courses</h2>

      <% courses.forEach(course => { %>
        <div class="course-box">
          <h3><%= course?.name || "Unnamed Course" %></h3>


          <% if (course?.announcements?.length > 0) { %>
            <strong>Announcements:</strong>
            <% course.announcements.forEach(a => { %>
              <div class="announcement-box">
                <%= a?.message || "No text" %>
                <br />
                <small><%= a?.createdAt ? a.createdAt.toDateString() : "" %></small>
              </div>
            <% }) %>
          <% } else { %>
            <p class="no-course-msg">No announcements.</p>
          <% } %>

          <% if (course?.resources?.length > 0) { %>
            <strong>Resources:</strong>
            <ul>
              <% course.resources.forEach(r => { %>
                <li>
                  <a href="<%= r?.fileUrl || '#' %>" target="_blank">
                    <%= r?.title || "Untitled file" %>
                  </a>
                  (<%= r?.fileType || "Unknown" %>)
                </li>
              <% }) %>
            </ul>
          <% } else { %>
            <p class="no-course-msg">No resources uploaded.</p>
          <% } %>

          <% if (course?.quizzes?.length > 0) { %>
            <strong>Quizzes:</strong>

            <% course.quizzes.forEach(q => { %>
              <div class="quiz-block">
                <p>
                  <strong>Quiz:</strong> <%= q?.title || "Untitled Quiz" %>
                  (Topic: <%= q?.topic || "None" %>)
                </p>

                <% if (q?.questions?.length > 0) { %>
                  <ol>
                    <% q.questions.forEach(ques => { %>
                      <li>
                        <p><strong>Q:</strong> <%= ques?.question || "No question" %></p>

                        <ul>
                          <% (ques?.options || []).forEach(opt => { %>
                            <li><%= opt %></li>
                          <% }) %>
                        </ul>

                        <p>
                          <span class="answer">
                            Answer: <%= ques?.answer || "Not provided" %>
                          </span>
                        </p>
                      </li>
                    <% }); %>
                  </ol>
                <% } else { %>
                  <p class="no-course-msg">No questions in this quiz.</p>
                <% } %>

              </div>
            <% }) %>

          <% } else { %>
            <p class="no-course-msg">No quizzes.</p>
          <% } %>

        </div>
      <% }) %>

    <% } else { %>
      <p class="no-course-msg">No courses created yet.</p>
    <% } %>
  </body>
</html> -->

<!-- ------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------ -->
<!-- wassam givenn dash ----------------------------------------------- -->

<!DOCTYPE html>
<html>
  <head>
    <title>Teacher Dashboard</title>
    <link rel="stylesheet" href="/css/teacher.css" />
  </head>

  <body>
    <!-- ================= SIDEBAR ================= -->
    <div class="sidebar">
      <div class="logo-area">
        <img src="/images/papLogo.jpeg" class="logo" />
        <h2>PARHO AUR PARHAO</h2>
      </div>

      <a href="#" class="active">Dashboard</a>
      <a href="#">My Courses</a>
      <a href="#">Add Course</a>

      <div class="version">Teacher Panel v1.0</div>
    </div>

    <!-- ================= MAIN CONTENT ================= -->
    <div class="main-container">
      <!-- TOP HEADER -->
      <div class="top-header">
        <h1>Hello <%= user?.name || "Teacher" %> ðŸ‘‹</h1>
        <a href="/user/logout" class="logout-btn">Logout</a>
      </div>


      <div class="content-box">
        <!-- ============ CENTER PANEL (COURSES) ============ -->
        <div class="courses-panel">
          <h2>Your Courses</h2>

          <% if (courses?.length > 0) { %>
            <% courses.forEach(course => { %>
              <div class="course-card">
                <h3><%= course?.name || "Unnamed Course" %></h3>

                <!-- ANNOUNCEMENTS -->
                <div class="section-title">Announcements</div>
                <% if (course?.announcements?.length > 0) { %>
                  <% course.announcements.forEach(a => { %>
                    <div class="announcement-box">
                      <%= a?.message || "No text" %>
                      <div class="small">
                        <%= a?.createdAt ? a.createdAt.toDateString() : "No date" %>
                      </div>
                    </div>
                  <% }) %>
                <% } else { %>
                  <p class="empty">No announcements.</p>
                <% } %>

                <!-- RESOURCES -->
                <div class="section-title">Resources</div>
                <% if (course?.resources?.length > 0) { %>
                  <ul class="resource-list">
                    <% course.resources.forEach(r => { %>
                      <li>
                        <a href="<%= r?.fileUrl || '#' %>" target="_blank">
                          <%= r?.title || "Untitled file" %>
                        </a>
                        (<%= r?.fileType || "Unknown" %>)
                      </li>
                    <% }) %>
                  </ul>
                <% } else { %>
                  <p class="empty">No resources uploaded.</p>
                <% } %>

                <!-- QUIZZES -->
                <div class="section-title">Quizzes</div>
                <% if (course?.quizzes?.length > 0) { %>
                  <% course.quizzes.forEach(q => { %>
                    <div class="quiz-box">
                      <div class="quiz-head">
                        <b><%= q?.title || "Untitled Quiz" %></b>
                        <span>Topic: <%= q?.topic || "None" %></span>
                      </div>

                      <% if (q?.questions?.length > 0) { %>
                        <ol>
                          <% q.questions.forEach(ques => { %>
                            <li>
                              <b>Q:</b> <%= ques?.question || "No question" %>
                              <ul>
                                <% (ques?.options || []).forEach(opt => { %>
                                  <li><%= opt %></li>
                                <% }) %>
                              </ul>
                              <div class="answer">Answer: <%= ques?.answer || "Not provided" %></div>
                            </li>
                          <% }) %>
                        </ol>
                      <% } else { %>
                        <p class="empty">No questions in this quiz.</p>
                      <% } %>
                    </div>
                  <% }) %>
                <% } else { %>
                  <p class="empty">No quizzes available.</p>
                <% } %>

              </div>
            <% }) %>
          <% } else { %>
            <p class="empty">No courses created yet.</p>
          <% } %>
        </div>

        <!-- ============ RIGHT PANEL (CREATE COURSE) ============ -->
        <div class="create-panel">
          <h3>Add Course + Resources + Quiz</h3>

          <% if (message) { %>
            <p class="success"><%= message %></p>
          <% } %>

          <form
            action="/teacher/course/create-with-resources"
            method="POST"
            enctype="multipart/form-data"
          >
            <label>Course Name</label>
            <input type="text" name="name" required placeholder="Enter course name" />

            <label>Announcement</label>
            <textarea name="announcementMessage" placeholder="Optional message"></textarea>

            <label>Upload Files</label>
            <input type="file" name="files" multiple />

            <h4>Add Quiz (5 Questions)</h4>

            <label>Quiz Title</label>
            <input type="text" name="quizTitle" placeholder="Enter quiz title" />

            <label>Quiz Topic</label>
            <input type="text" name="quizTopic" placeholder="Enter optional topic" />

            <% for (let i = 1; i <= 5; i++) { %>
              <div class="question-box">
                <div class="q-head">Question <%= i %></div>
                <input type="text" name="q<%= i %>" placeholder="Enter question" />

                <% for (let j = 1; j <= 4; j++) { %>
                  <input type="text" name="q<%= i %>_options[]" placeholder="Option <%= j %>" />
                <% } %>

                <input type="text" name="q<%= i %>_answer" placeholder="Correct answer" />
              </div>
            <% } %>

            <button type="submit" class="submit-btn">Create Course</button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>